% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/download_boundaries.R
\name{download_istat_boundaries}
\alias{download_istat_boundaries}
\title{Download ISTAT Administrative Boundary Shapefiles}
\usage{
download_istat_boundaries(
  date = NULL,
  territorial_levels = c("comuni", "province", "regioni", "ripartizioni"),
  output_dir = NULL,
  force_refresh = FALSE,
  verbose = TRUE
)
}
\arguments{
\item{date}{Date for which to download boundaries. Can be a Date object or
character string in "YYYY-MM-DD" format. Defaults to most recent January 1st.
Available dates: January 1st of each year from 2020 to present.}

\item{territorial_levels}{Character vector of territorial levels to download.
Options: "comuni", "province", "regioni", "ripartizioni".
Default is all levels.}

\item{output_dir}{Directory where boundaries will be cached. Default uses
\code{tools::R_user_dir("situas", which = "data")}.}

\item{force_refresh}{Logical. If TRUE, re-downloads even if already cached.
Default is FALSE.}

\item{verbose}{Logical. Print progress messages? Default is TRUE.}
}
\value{
A data.table with download status for each territorial level, including:
  \itemize{
    \item territorial_level: The territorial level
    \item status: "success", "cached", or "failed"
    \item source: "OnData" or "ISTAT"
    \item file_path: Path to downloaded shapefile
    \item error: Error message if status is "failed"
  }
}
\description{
Downloads generalized boundary shapefiles for Italian administrative units
from the OnData repository (with ISTAT fallback). Boundaries are cached
locally for offline use.
}
\section{Data Source}{

Primary source is the OnData repository (\url{https://www.confini-amministrativi.it}),
which provides ISTAT boundaries in multiple formats with easier programmatic access.
If OnData is unavailable, the function falls back to direct ISTAT downloads.
}

\section{File Organization}{

Downloaded boundaries are organized by date:
\preformatted{
{cache_dir}/boundaries/
  ├── 20250101/
  │   ├── Com_gen_WGS84.shp
  │   ├── ProvCM_gen_WGS84.shp
  │   └── ...
  └── metadata.rds
}
}

\examples{
\dontrun{
# Download all boundaries for 2025-01-01
result <- download_istat_boundaries()

# Download only municipalities for a specific date
result <- download_istat_boundaries(
  date = "2024-01-01",
  territorial_levels = "comuni"
)

# Force re-download even if cached
result <- download_istat_boundaries(force_refresh = TRUE)
}

}
\seealso{
\code{\link{list_istat_boundary_versions}} to see available versions
\code{\link{check_boundary_updates}} to check for updates
\code{\link{get_cached_boundaries_info}} to see cached boundaries
}
