% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/download_classifications.R
\name{download_classification_standards}
\alias{download_classification_standards}
\title{Download Italian Labor Ministry Classification Standards}
\usage{
download_classification_standards(
  output_dir = "data-raw/classifications",
  url =
    "https://urponline.lavoro.gov.it/s/standard-tecnici/classificazioni-standard?language=it",
  download_all = FALSE,
  force_refresh = FALSE,
  use_js_scraping = FALSE,
  classification_types = NULL,
  verbose = TRUE
)
}
\arguments{
\item{output_dir}{Character. Directory where files will be saved.
Defaults to "data-raw/classifications". Created if it doesn't exist.}

\item{url}{Character. URL of the classifications page. Default is the
official Italian Labor Ministry standards page.}

\item{download_all}{Logical. If TRUE, download all versions found. If FALSE
(default), download only the latest version of each classification type.}

\item{force_refresh}{Logical. If TRUE, re-download files even if they already
exist. Default is FALSE.}

\item{use_js_scraping}{Logical. If TRUE, use JavaScript-enabled scraping
(requires RSelenium or chromote). Default is FALSE. Currently not implemented.}

\item{classification_types}{Character vector. Types to download. NULL (default)
downloads all types. Available types include: "classificazioni_standard",
"allegato", "migrazione".}

\item{verbose}{Logical. Print progress messages. Default is TRUE.}
}
\value{
Invisibly returns a data.table with information about downloaded files:
  \describe{
    \item{filename}{Downloaded filename}
    \item{url}{Source URL}
    \item{link_text}{Original link text from webpage}
    \item{version}{Extracted version number (NA if not parseable)}
    \item{type}{Classification type}
    \item{file_path}{Full path to downloaded file}
    \item{download_date}{Timestamp when file was downloaded}
    \item{file_size}{File size in bytes}
  }

  A metadata file is also saved to \code{output_dir/download_metadata.rds}
  containing download information and file list.
}
\description{
Downloads the latest versions of classification standard Excel files from
the Italian Ministry of Labor and Social Policies website. These files
contain official classifications used in administrative data systems (URP).
}
\details{
The function can:
\itemize{
  \item Scrape the classifications page to find available files
  \item Parse version numbers from filenames
  \item Download only the latest version of each classification type
  \item Skip already-downloaded files (unless force_refresh = TRUE)
  \item Save metadata about downloaded files
}
}
\section{Classification Types}{


The main classification types are:
\describe{
  \item{classificazioni_standard}{Main classification standards file
    (Rev.XXX-ST-Classificazioni-Standard.xlsx). Contains multiple sheets
    with various classification codes used in Italian administrative systems.}
  \item{allegato}{Annexes with additional information or mappings}
  \item{migrazione}{Migration analysis files showing changes between
    classification versions}
}
}

\section{Note}{


This function requires the \code{rvest} and \code{polite} packages for
web scraping. Install them with:
\code{install.packages(c("rvest", "polite"))}

The Labor Ministry website may change structure over time. If scraping fails,
you may need to download files manually from:
\url{https://urponline.lavoro.gov.it/s/standard-tecnici/classificazioni-standard}
}

\examples{
\dontrun{
# Download latest versions only (recommended)
files <- download_classification_standards()

# Download to specific directory
files <- download_classification_standards(
  output_dir = "my_data/classifications"
)

# Force re-download of all files
files <- download_classification_standards(force_refresh = TRUE)

# Download only main classification standards
files <- download_classification_standards(
  classification_types = "classificazioni_standard"
)

# Download all versions (not just latest)
files <- download_classification_standards(download_all = TRUE)

# View downloaded files
print(files)

# Check what was downloaded
files[, .(filename, version, type, file_size)]
}
}
